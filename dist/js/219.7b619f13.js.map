{"version":3,"file":"js/219.7b619f13.js","mappings":"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","sources":["webpack://act/./src/views/Sign/index.vue","webpack://act/./src/api/sign.js","webpack://act/src/views/Sign/index.vue","webpack://act/./src/views/Sign/index.vue?ac96","webpack://act/./src/views/Sign/index.vue?1f9a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"operation\"},[_vm._v(\" 日期： \"),_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"picker-options\":_vm.pickerOptions,\"range-separator\":\"-\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"align\":\"right\"},model:{value:(_vm.query.time),callback:function ($$v) {_vm.$set(_vm.query, \"time\", $$v)},expression:\"query.time\"}}),_vm._v(\" 活动名称：\"),_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},model:{value:(_vm.query.activityName),callback:function ($$v) {_vm.$set(_vm.query, \"activityName\", $$v)},expression:\"query.activityName\"}}),_vm._v(\" 部门：\"),_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},model:{value:(_vm.query.depName),callback:function ($$v) {_vm.$set(_vm.query, \"depName\", $$v)},expression:\"query.depName\"}}),_vm._v(\" 姓名\"),_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},model:{value:(_vm.query.trueName),callback:function ($$v) {_vm.$set(_vm.query, \"trueName\", $$v)},expression:\"query.trueName\"}}),_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-search\",\"circle\":\"\"},on:{\"click\":_vm.getList}}),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.exportAsExcel}},[_vm._v(\"导出\")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"ATable\",attrs:{\"data\":_vm.tableData,\"border\":true,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"activityName\",\"label\":\"活动名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"depName\",\"label\":\"部门\"}}),_c('el-table-column',{attrs:{\"prop\":\"trueName\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"isSignOut\",\"label\":\"签退状态\"}}),_c('el-table-column',{attrs:{\"prop\":\"signInTime\",\"label\":\"签到时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"signOutTime\",\"label\":\"签退时间\"}})],1),_c('el-pagination',{staticClass:\"pagination\",attrs:{\"background\":\"\",\"current-page\":_vm.pagination.current,\"page-sizes\":_vm.pagination.pageSizes,\"page-size\":_vm.pagination.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import service from \"@/plugins/request\"\r\n\r\nexport function getSignList (page = 1, pageSize = 10, data) {\r\n  const formData = new FormData()\r\n  formData.append('activityName', data.activityName)\r\n  formData.append('trueName', data.trueName)\r\n  formData.append('depName', data.depName)\r\n  formData.append('signStartTime', data.signStartTime)\r\n  formData.append('signEndTime', data.signEndTime)\r\n  return service({\r\n    url: `/signIn/signInList/${page}/${pageSize}`,\r\n    method: 'post',\r\n    data: formData\r\n  })\r\n}\r\n\r\nexport function exportExcel (data) {\r\n  const formData = new FormData()\r\n  formData.append('activityName', data.activityName)\r\n  formData.append('trueName', data.trueName)\r\n  formData.append('depName', data.depName)\r\n  return service({\r\n    url: '/signIn/export',\r\n    method: 'post',\r\n    data: formData,\r\n    responseType: 'blob'\r\n  })\r\n}","<template>\r\n  <div>\r\n    <div class=\"operation\">\r\n      日期：\r\n      <el-date-picker\r\n        v-model=\"query.time\"\r\n        type=\"datetimerange\"\r\n        :picker-options=\"pickerOptions\"\r\n        range-separator=\"-\"\r\n        start-placeholder=\"开始日期\"\r\n        end-placeholder=\"结束日期\"\r\n        align=\"right\"\r\n      >\r\n      </el-date-picker>\r\n      活动名称：<el-input placeholder=\"请输入内容\" v-model=\"query.activityName\" clearable></el-input>\r\n      部门：<el-input placeholder=\"请输入内容\" v-model=\"query.depName\" clearable></el-input>\r\n      姓名<el-input placeholder=\"请输入内容\" v-model=\"query.trueName\" clearable></el-input>\r\n      <el-button type=\"success\" icon=\"el-icon-search\" circle @click=\"getList\"></el-button>\r\n      <el-button type=\"primary\" @click=\"exportAsExcel\">导出</el-button>\r\n    </div>\r\n    <el-table\r\n      v-loading=\"loading\"\r\n      :data=\"tableData\"\r\n      :border=\"true\"\r\n      stripe\r\n      class=\"ATable\"\r\n    >\r\n      <el-table-column\r\n        prop=\"activityName\"\r\n        label=\"活动名称\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"depName\"\r\n        label=\"部门\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"trueName\"\r\n        label=\"姓名\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"isSignOut\"\r\n        label=\"签退状态\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"signInTime\"\r\n        label=\"签到时间\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"signOutTime\"\r\n        label=\"签退时间\"\r\n      >\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      background\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"pagination.current\"\r\n      :page-sizes=\"pagination.pageSizes\"\r\n      :page-size=\"pagination.pageSize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"pagination.total\"\r\n      class=\"pagination\"\r\n    >\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSignList, exportExcel } from '@/api/sign'\r\nimport moment from 'moment';\r\n// import moment from 'moment'\r\n\r\nexport default {\r\n  name: 'SignView',\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      dialogFormVisible: false,\r\n      query: {\r\n        activityName: '',\r\n        trueName: '',\r\n        depName: '',\r\n        time: ''\r\n      },\r\n      loading: true,\r\n      pickerOptions: {\r\n        shortcuts: [{\r\n          text: '最近一周',\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n            picker.$emit('pick', [start, end]);\r\n          }\r\n        }, {\r\n          text: '最近一个月',\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\r\n            picker.$emit('pick', [start, end]);\r\n          }\r\n        }, {\r\n          text: '最近三个月',\r\n          onClick(picker) {\r\n            const end = new Date();\r\n            const start = new Date();\r\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\r\n            picker.$emit('pick', [start, end]);\r\n          }\r\n        }]\r\n      },\r\n      pagination: {\r\n        current: 1,\r\n        pageSizes: [10, 20, 50],\r\n        pageSize: 10,\r\n        total: 0\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.query.activityName = this.$store.state.activityName\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    async getList () {\r\n      const query = {\r\n        activityName: this.query.activityName,\r\n        trueName: this.query.trueName,\r\n        depName: this.query.depName,\r\n        signStartTime: this.query.time ? moment(this.query.time[0]).format('YYYY-MM-DD HH:mm:ss') : '',\r\n        signEndTime: this.query.time ? moment(this.query.time[1]).format('YYYY-MM-DD HH:mm:ss') : '',\r\n      }\r\n      this.loading = true\r\n      const { data: { data } } = await getSignList(this.pagination.current, this.pagination.pageSize, query)\r\n      // this.startDatetime = moment(new Date()).add(2, 'hours').format('YYYY-MM-DD HH:mm:ss')\r\n      // console.log(this.startDatetime)\r\n      data.records.forEach(r => {\r\n        r.isSignOut = r.isSignOut ? '已签退' : '未签退'\r\n        r.signInTime = r.signInTime ? moment(r.signInTime).format('YYYY-MM-DD HH:mm:ss') : '未签到'\r\n        r.signOutTime = r.signOutTime ? moment(r.signOutTime).format('YYYY-MM-DD HH:mm:ss') : '未签退'\r\n      })\r\n      this.pagination.current = data.current\r\n      this.pagination.total = data.total\r\n      this.tableData = data.records\r\n      this.loading = false\r\n    },\r\n    handleSizeChange(val) {\r\n      this.pagination.pageSize = val\r\n      this.getList()\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pagination.current = val\r\n      this.getList()\r\n    },\r\n    async exportAsExcel () {\r\n      const { data } = await exportExcel(this.query)\r\n      const url = window.URL.createObjectURL(new Blob([data]))\r\n      const link = document.createElement('a')\r\n      link.style.display = 'none'\r\n      link.href = url\r\n      link.download = '签到信息表.xlsx'\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      window.URL.revokeObjectURL(link.href)\r\n      document.body.removeChild(link)\r\n      this.$message.success('导出成功', 1)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.ATable {\r\n  width: 80%;\r\n  margin: 20px auto\r\n}\r\n.operation {\r\n  width: 80%;\r\n  margin: 40px auto;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  line-height: 40px;\r\n  .el-input {\r\n    width: 15%;\r\n  }\r\n  .addBtn {\r\n    width: 40px;\r\n    text-align: center;\r\n    padding: 12px 0;\r\n  }\r\n}\r\n.pagination {\r\n  width: 80%;\r\n  margin: 40px auto;\r\n}\r\n.dialog {\r\n  .el-input {\r\n    width: 94%;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a12b23ec&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=a12b23ec&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a12b23ec\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","pickerOptions","model","value","query","time","callback","$$v","$set","expression","activityName","depName","trueName","on","getList","exportAsExcel","directives","name","rawName","loading","tableData","pagination","current","pageSizes","pageSize","total","handleSizeChange","handleCurrentChange","staticRenderFns","getSignList","page","data","formData","FormData","append","signStartTime","signEndTime","service","url","method","exportExcel","responseType","dialogFormVisible","shortcuts","text","onClick","start","picker","created","methods","r","link","document","window","component"],"sourceRoot":""}