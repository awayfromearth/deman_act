{"version":3,"file":"js/219.54bcaf13.js","mappings":"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","sources":["webpack://act/./src/views/Sign/index.vue","webpack://act/./src/api/sign.js","webpack://act/src/views/Sign/index.vue","webpack://act/./src/views/Sign/index.vue?ac96","webpack://act/./src/views/Sign/index.vue?1f9a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"operation\"},[_vm._v(\" 日期： \"),_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"picker-options\":_vm.pickerOptions,\"range-separator\":\"-\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"align\":\"right\"},model:{value:(_vm.query.time),callback:function ($$v) {_vm.$set(_vm.query, \"time\", $$v)},expression:\"query.time\"}}),_vm._v(\" 活动名称：\"),_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},model:{value:(_vm.query.activityName),callback:function ($$v) {_vm.$set(_vm.query, \"activityName\", $$v)},expression:\"query.activityName\"}}),_vm._v(\" 部门：\"),_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},model:{value:(_vm.query.depName),callback:function ($$v) {_vm.$set(_vm.query, \"depName\", $$v)},expression:\"query.depName\"}}),_vm._v(\" 姓名\"),_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},model:{value:(_vm.query.trueName),callback:function ($$v) {_vm.$set(_vm.query, \"trueName\", $$v)},expression:\"query.trueName\"}}),_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-search\",\"circle\":\"\"},on:{\"click\":_vm.getList}}),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.exportAsExcel}},[_vm._v(\"导出\")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"ATable\",attrs:{\"data\":_vm.tableData,\"border\":true,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"activityName\",\"label\":\"活动名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"depName\",\"label\":\"部门\"}}),_c('el-table-column',{attrs:{\"prop\":\"trueName\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"isSignOut\",\"label\":\"签退状态\"}}),_c('el-table-column',{attrs:{\"prop\":\"signInTime\",\"label\":\"签到时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"signOutTime\",\"label\":\"签退时间\"}})],1),_c('el-pagination',{staticClass:\"pagination\",attrs:{\"background\":\"\",\"current-page\":_vm.pagination.current,\"page-sizes\":_vm.pagination.pageSizes,\"page-size\":_vm.pagination.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.pagination.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import service from \"@/plugins/request\"\n\nexport function getSignList (page = 1, pageSize = 10, data) {\n  const formData = new FormData()\n  formData.append('activityName', data.activityName)\n  formData.append('trueName', data.trueName)\n  formData.append('depName', data.depName)\n  formData.append('signStartTime', data.signStartTime)\n  formData.append('signEndTime', data.signEndTime)\n  return service({\n    url: `/signIn/signInList/${page}/${pageSize}`,\n    method: 'post',\n    data: formData\n  })\n}\n\nexport function exportExcel (data) {\n  const formData = new FormData()\n  formData.append('activityName', data.activityName)\n  formData.append('trueName', data.trueName)\n  formData.append('depName', data.depName)\n  return service({\n    url: '/signIn/export',\n    method: 'post',\n    data: formData,\n    responseType: 'blob'\n  })\n}","<template>\n  <div>\n    <div class=\"operation\">\n      日期：\n      <el-date-picker\n        v-model=\"query.time\"\n        type=\"datetimerange\"\n        :picker-options=\"pickerOptions\"\n        range-separator=\"-\"\n        start-placeholder=\"开始日期\"\n        end-placeholder=\"结束日期\"\n        align=\"right\"\n      >\n      </el-date-picker>\n      活动名称：<el-input placeholder=\"请输入内容\" v-model=\"query.activityName\" clearable></el-input>\n      部门：<el-input placeholder=\"请输入内容\" v-model=\"query.depName\" clearable></el-input>\n      姓名<el-input placeholder=\"请输入内容\" v-model=\"query.trueName\" clearable></el-input>\n      <el-button type=\"success\" icon=\"el-icon-search\" circle @click=\"getList\"></el-button>\n      <el-button type=\"primary\" @click=\"exportAsExcel\">导出</el-button>\n    </div>\n    <el-table\n      v-loading=\"loading\"\n      :data=\"tableData\"\n      :border=\"true\"\n      stripe\n      class=\"ATable\"\n    >\n      <el-table-column\n        prop=\"activityName\"\n        label=\"活动名称\"\n      >\n      </el-table-column>\n      <el-table-column\n        prop=\"depName\"\n        label=\"部门\"\n      >\n      </el-table-column>\n      <el-table-column\n        prop=\"trueName\"\n        label=\"姓名\"\n      >\n      </el-table-column>\n      <el-table-column\n        prop=\"isSignOut\"\n        label=\"签退状态\"\n      >\n      </el-table-column>\n      <el-table-column\n        prop=\"signInTime\"\n        label=\"签到时间\"\n      >\n      </el-table-column>\n      <el-table-column\n        prop=\"signOutTime\"\n        label=\"签退时间\"\n      >\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      background\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :current-page=\"pagination.current\"\n      :page-sizes=\"pagination.pageSizes\"\n      :page-size=\"pagination.pageSize\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"pagination.total\"\n      class=\"pagination\"\n    >\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport { getSignList, exportExcel } from '@/api/sign'\nimport moment from 'moment';\n// import moment from 'moment'\n\nexport default {\n  name: 'SignView',\n  data() {\n    return {\n      tableData: [],\n      dialogFormVisible: false,\n      query: {\n        activityName: '',\n        trueName: '',\n        depName: '',\n        time: ''\n      },\n      loading: true,\n      pickerOptions: {\n        shortcuts: [{\n          text: '最近一周',\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n            picker.$emit('pick', [start, end]);\n          }\n        }, {\n          text: '最近一个月',\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n            picker.$emit('pick', [start, end]);\n          }\n        }, {\n          text: '最近三个月',\n          onClick(picker) {\n            const end = new Date();\n            const start = new Date();\n            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\n            picker.$emit('pick', [start, end]);\n          }\n        }]\n      },\n      pagination: {\n        current: 1,\n        pageSizes: [10, 20, 50],\n        pageSize: 10,\n        total: 0\n      }\n    }\n  },\n  created () {\n    this.query.activityName = this.$store.state.activityName\n    this.getList()\n  },\n  methods: {\n    async getList () {\n      const query = {\n        activityName: this.query.activityName,\n        trueName: this.query.trueName,\n        depName: this.query.depName,\n        signStartTime: this.query.time ? moment(this.query.time[0]).format('YYYY-MM-DD HH:mm:ss') : '',\n        signEndTime: this.query.time ? moment(this.query.time[1]).format('YYYY-MM-DD HH:mm:ss') : '',\n      }\n      this.loading = true\n      const { data: { data } } = await getSignList(this.pagination.current, this.pagination.pageSize, query)\n      // this.startDatetime = moment(new Date()).add(2, 'hours').format('YYYY-MM-DD HH:mm:ss')\n      // console.log(this.startDatetime)\n      data.records.forEach(r => {\n        r.isSignOut = r.isSignOut ? '已签退' : '未签退'\n        r.signInTime = r.signInTime ? moment(r.signInTime).format('YYYY-MM-DD HH:mm:ss') : '未签到'\n        r.signOutTime = r.signOutTime ? moment(r.signOutTime).format('YYYY-MM-DD HH:mm:ss') : '未签退'\n      })\n      this.pagination.current = data.current\n      this.pagination.total = data.total\n      this.tableData = data.records\n      this.loading = false\n    },\n    handleSizeChange(val) {\n      this.pagination.pageSize = val\n      this.getList()\n    },\n    handleCurrentChange(val) {\n      this.pagination.current = val\n      this.getList()\n    },\n    async exportAsExcel () {\n      const { data } = await exportExcel(this.query)\n      const url = window.URL.createObjectURL(new Blob([data]))\n      const link = document.createElement('a')\n      link.style.display = 'none'\n      link.href = url\n      link.download = '签到信息表.xlsx'\n      document.body.appendChild(link)\n      link.click()\n      window.URL.revokeObjectURL(link.href)\n      document.body.removeChild(link)\n      this.$message.success('导出成功', 1)\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.ATable {\n  width: 80%;\n  margin: 20px auto\n}\n.operation {\n  width: 80%;\n  margin: 40px auto;\n  display: flex;\n  justify-content: space-between;\n  line-height: 40px;\n  .el-input {\n    width: 15%;\n  }\n  .addBtn {\n    width: 40px;\n    text-align: center;\n    padding: 12px 0;\n  }\n}\n.pagination {\n  width: 80%;\n  margin: 40px auto;\n}\n.dialog {\n  .el-input {\n    width: 94%;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a12b23ec&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=a12b23ec&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a12b23ec\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","pickerOptions","model","value","query","time","callback","$$v","$set","expression","activityName","depName","trueName","on","getList","exportAsExcel","directives","name","rawName","loading","tableData","pagination","current","pageSizes","pageSize","total","handleSizeChange","handleCurrentChange","staticRenderFns","getSignList","page","data","formData","FormData","append","signStartTime","signEndTime","service","url","method","exportExcel","responseType","dialogFormVisible","shortcuts","text","onClick","start","picker","created","methods","r","link","document","window","component"],"sourceRoot":""}